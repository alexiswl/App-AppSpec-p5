#!/usr/bin/env perl
# vim:et:sts=4:sws=4:sw=4
use strict;
use warnings;
use 5.010;
use Data::Dumper;
use FindBin '$Bin';

use App::Spec;
use App::AppSpec;

my $spec = App::Spec->read(\*DATA);
my $run = App::AppSpec->new({
    spec => $spec,
});
$run->run;

__DATA__
---
name: app-spec
version: 1
title: Utility for reading specification for cli apps
options:
commands:
    help:
        op: cmd_help
        summary: Show command help
        options:
        -   name: all
            type: bool
    completion:
        summary: Generate completion for a specified spec file
        options:
        -   name: name
            description: name of the program
        subcommands:
            zsh:
                op: cmd_completion_zsh
                summary: for zsh
                parameters:
                -   &param_spec_file
                    name: spec_file
                    type: file
                    required: true
                    description: Path to the spec file
            bash:
                op: cmd_completion_bash
                summary: for bash
                options:
                -   name: without-description
                    type: bool
                    default: false
                    description: generate without description
                parameters:
                -   *param_spec_file
